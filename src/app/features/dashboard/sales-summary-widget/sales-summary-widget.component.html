<p-card styleClass="h-full shadow-sm border-0">
  <ng-template pTemplate="header">
    <div class="flex justify-between items-center p-4 border-b border-gray-100">
      <h2 class="text-xl font-semibold m-0">Resumen de Ventas</h2>
      <div class="flex items-center">
        <span class="mr-2 text-sm">{{ periodText }}</span>
        <div class="flex gap-1">
          @for (period of periods; track period.value) {
            <button
              pButton
              type="button"
              [label]="period.label"
              class="p-button-text p-button-sm"
              (click)="changePeriod(period.label)"
              [pTooltip]="'Ver datos de ' + period.label.toLowerCase()"
              tooltipPosition="top"
              [ariaLabel]="'Ver datos de ' + period.label.toLowerCase()"
            >
              <span>{{ period.label }}</span>
            </button>
          }
        </div>
      </div>
    </div>
  </ng-template>

  <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4">
    @for (metric of salesMetrics; track metric.label) {
      <div
        class="p-3 border rounded-lg shadow-sm hover:shadow-md transition-all duration-200"
        [ngStyle]="{ 'border-color': metric.color }"
      >
        <div class="flex justify-between mb-2">
          <div class="flex items-center">
            <i
              [class]="metric.icon"
              [ngStyle]="{ color: metric.color }"
              class="text-xl mr-2"
            ></i>
            <span class="text-sm text-gray-500">{{ metric.label }}</span>
          </div>
          <div class="flex items-center">
            <i
              [ngClass]="{
                'pi pi-arrow-up text-green-500': metric.trend === 'up',
                'pi pi-arrow-down text-red-500': metric.trend === 'down',
                'pi pi-minus text-gray-500': metric.trend === 'neutral',
              }"
              class="mr-1"
            ></i>
            <span
              [ngClass]="{
                'text-green-500': metric.trend === 'up',
                'text-red-500': metric.trend === 'down',
                'text-gray-500': metric.trend === 'neutral',
              }"
              class="text-sm"
              >{{ metric.percentage }}%</span
            >
          </div>
        </div>
        <div class="text-2xl font-bold">
          {{
            metric.label === 'Ventas' || metric.label === 'Venta Promedio'
              ? formatCurrency(metric.value)
              : metric.value
          }}
        </div>
      </div>
    }
  </div>
</p-card>
